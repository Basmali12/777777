
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CryptoVault V6 Real-Active</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        :root {
            --primary: #00d4aa;
            --bg: #0a0e17;
            --card: #13192b;
            --text: #ffffff;
            --danger: #ff7675;
        }

        .theme-blue { --primary: #2980b9; }
        .theme-gold { --primary: #f1c40f; }
        .theme-purple { --primary: #9b59b6; }
        .theme-red { --primary: #e74c3c; }

        * { box-sizing: border-box; outline: none; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; font-family: 'Cairo', sans-serif; background-color: #000; color: white; overflow-x: hidden; }

        #root {
            width: 100%; max-width: 480px; margin: 0 auto; background-color: var(--bg); position: relative;
            min-height: 100vh; padding-bottom: 110px;
            box-shadow: 0 0 20px rgba(255,255,255,0.05);
        }

        /* Animations */
        @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        .slide-in { animation: slideIn 0.2s ease-out forwards; }

        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 5000; display: flex; align-items: flex-end; justify-content: center; backdrop-filter: blur(5px); animation: fadeIn 0.2s; }
        .modal-content { background: #1a2238; width: 100%; max-width: 480px; border-radius: 24px 24px 0 0; padding: 24px; border-top: 1px solid rgba(255,255,255,0.1); max-height: 80vh; overflow-y: auto; }
        .modal-center { align-items: center; }
        .modal-center .modal-content { border-radius: 24px; width: 90%; max-width: 340px; }

        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
        .btn-primary { background: var(--primary); color: #000; border: none; font-weight: bold; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .btn-primary:active { transform: scale(0.95); }

        .story-ring { width: 64px; height: 64px; border-radius: 50%; padding: 2px; background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .story-img { width: 100%; height: 100%; background: #2d3446; border-radius: 50%; border: 3px solid var(--bg); display: flex; align-items: center; justify-content: center; font-size: 24px; }

        .pin-dot { width: 16px; height: 16px; border-radius: 50%; border: 2px solid var(--primary); transition: 0.2s; }
        .pin-dot.filled { background: var(--primary); }
        .num-pad-btn { width: 70px; height: 70px; border-radius: 35px; background: rgba(255,255,255,0.05); font-size: 24px; display: flex; align-items: center; justify-content: center; cursor: pointer; }

        .scroll-hide::-webkit-scrollbar { display: none; }
        .scroll-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        input, select, textarea { width: 100%; padding: 15px; border-radius: 12px; background: #0a0e17; border: 1px solid #333; color: white; margin-bottom: 15px; font-family: inherit; font-size: 16px; }
        input:focus, select:focus, textarea:focus { border-color: var(--primary); }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function CryptoVaultV6() {
            // --- Core State ---
            const [isLocked, setIsLocked] = useState(true);
            const [pin, setPin] = useState('');
            const [activeTab, setActiveTab] = useState('home');
            const [subView, setSubView] = useState(null); // The Key Change: Tracks internal navigation
            const [balance, setBalance] = useState(1250.00);
            const [theme, setTheme] = useState('');
            const [showBalance, setShowBalance] = useState(true);
            const [energy, setEnergy] = useState(100);

            // --- Features State ---
            const [modal, setModal] = useState(null);
            const [toast, setToast] = useState(null);
            const [inputValue, setInputValue] = useState('');
            
            const navRef = useRef(null);

            // --- Data ---
            const tabs = [
                { id: 'home', icon: 'ğŸ ', label: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' },
                { id: 'market', icon: 'ğŸ“Š', label: 'Ø§Ù„Ø³ÙˆÙ‚' },
                { id: 'trade', icon: 'ğŸ”', label: 'ØªØ¯Ø§ÙˆÙ„' },
                { id: 'invest', icon: 'ğŸ’°', label: 'Ø§Ø³ØªØ«Ù…Ø§Ø±' },
                { id: 'shop', icon: 'ğŸ›’', label: 'Ø§Ù„Ù…ØªØ¬Ø±' },
                { id: 'wallet', icon: 'ğŸ’¼', label: 'Ù…Ø­ÙØ¸Ø©' },
                { id: 'learn', icon: 'ğŸ“', label: 'ØªØ¹Ù„Ù…' },
                { id: 'community', icon: 'ğŸŒ', label: 'Ù…Ø¬ØªÙ…Ø¹' },
                { id: 'rewards', icon: 'ğŸ', label: 'Ø¬ÙˆØ§Ø¦Ø²' },
                { id: 'tools', icon: 'ğŸ› ï¸', label: 'Ø£Ø¯ÙˆØ§Øª' },
            ];

            const features = {
                market: [
                    { t: 'Ø£Ø³Ø¹Ø§Ø± Ø­ÙŠØ©', i: 'ğŸ“ˆ', id: 'market_live' }, { t: 'Ø§Ù„Ø±Ø§Ø¨Ø­ÙˆÙ†', i: 'ğŸš€', id: 'market_gainers' }, { t: 'Ø®Ø±ÙŠØ·Ø© Ø­Ø±Ø§Ø±ÙŠØ©', i: 'ğŸ—ºï¸', id: 'market_map' }, { t: 'Ø£Ø®Ø¨Ø§Ø± Ø¹Ø§Ù„Ù…ÙŠØ©', i: 'ğŸ“°', id: 'market_news' }
                ],
                trade: [
                    { t: 'ØªØ­ÙˆÙŠÙ„ ÙÙˆØ±ÙŠ', i: 'ğŸ’±', id: 'trade_swap' }, { t: 'ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ù‡Ø§Ù…Ø´', i: 'ğŸ¢', id: 'trade_margin' }, { t: 'Ø¨ÙˆØª Ø§Ù„ØªØ¯Ø§ÙˆÙ„', i: 'ğŸ¤–', id: 'trade_bot' }, { t: 'Ø¹Ù‚ÙˆØ¯ Ø¢Ø¬Ù„Ø©', i: 'â³', id: 'trade_futures' }
                ],
                invest: [
                    { t: 'Ø§Ù„ØªØ®Ø²ÙŠÙ† (Staking)', i: 'ğŸ”’', id: 'invest_stake' }, { t: 'ØªØ¹Ø¯ÙŠÙ† Ø³Ø­Ø§Ø¨ÙŠ', i: 'â˜ï¸', id: 'invest_mine' }, { t: 'Ø§ÙƒØªØªØ§Ø¨Ø§Øª', i: 'ğŸ†•', id: 'invest_ipo' }, { t: 'Ø§Ø¯Ø®Ø§Ø± Ø¢Ù„ÙŠ', i: 'ğŸ–', id: 'invest_save' }
                ],
                shop: [
                    { t: 'Ø¨Ø·Ø§Ù‚Ø§Øª Ù‡Ø¯Ø§ÙŠØ§', i: 'ğŸ’³', id: 'shop_cards' }, { t: 'Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø­Ù„', i: 'ğŸ‘•', id: 'shop_items' }, { t: 'Ù…Ø­Ø§ÙØ¸ Ø¨Ø§Ø±Ø¯Ø©', i: 'ğŸ”', id: 'shop_hw' }, { t: 'Ø´Ø±Ø§Ø¡ VPN', i: 'ğŸ›¡ï¸', id: 'shop_vpn' }
                ],
                wallet: [
                    { t: 'Ø§Ù„Ø£ØµÙˆÙ„', i: 'ğŸ’µ', id: 'wallet_assets' }, { t: 'Ù…Ø¹Ø±Ø¶ NFT', i: 'ğŸ–¼ï¸', id: 'wallet_nft' }, { t: 'Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†', i: 'ğŸ“’', id: 'wallet_addr' }, { t: 'ØªØ§Ø±ÙŠØ®', i: 'ğŸ“œ', id: 'wallet_hist' }
                ],
                learn: [
                    { t: 'Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©', i: 'ğŸ«', id: 'learn_acad' }, { t: 'Ù…Ø³Ø§Ø¨Ù‚Ø§Øª', i: 'ğŸ“', id: 'learn_quiz' }, { t: 'Ù‚Ø§Ù…ÙˆØ³', i: 'ğŸ“–', id: 'learn_dict' }, { t: 'Ù†Ø¯ÙˆØ§Øª', i: 'ğŸ“¹', id: 'learn_vid' }
                ],
                community: [
                    { t: 'Ø´Ø§Øª Ø¹Ø§Ù…', i: 'ğŸ’¬', id: 'comm_chat' }, { t: 'Ù…Ù†ØªØ¯ÙŠØ§Øª', i: 'ğŸ“¢', id: 'comm_forum' }, { t: 'ØªØµÙˆÙŠØª', i: 'ğŸ—³ï¸', id: 'comm_vote' }, { t: 'ÙØ¹Ø§Ù„ÙŠØ§Øª', i: 'ğŸ‰', id: 'comm_event' }
                ],
                rewards: [
                    { t: 'Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ©', i: 'âœ…', id: 'rew_tasks' }, { t: 'Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸', i: 'ğŸ¡', id: 'rew_wheel' }, { t: 'Ø¥Ø­Ø§Ù„Ø§Øª', i: 'ğŸ‘¥', id: 'rew_ref' }, { t: 'ØªÙˆØ²ÙŠØ¹Ø§Øª', i: 'ğŸª‚', id: 'rew_drop' }
                ],
                tools: [
                    { t: 'Ø­Ø§Ø³Ø¨Ø© Ø¶Ø±Ø§Ø¦Ø¨', i: 'ğŸ§®', id: 'tool_tax' }, { t: 'Ù…Ù†Ø¨Ù‡ Ø£Ø³Ø¹Ø§Ø±', i: 'â°', id: 'tool_alarm' }, { t: 'Ù…Ø­ÙˆÙ„ Ø¹Ù…Ù„Ø§Øª', i: 'ğŸ”„', id: 'tool_conv' }, { t: 'Ù‚Ø§Ø¦Ù…Ø© Ù…Ø±Ø§Ù‚Ø¨Ø©', i: 'ğŸ‘€', id: 'tool_watch' }
                ]
            };

            // --- Effects ---
            useEffect(() => {
                let shakeHandler = () => setShowBalance(prev => !prev);
                window.addEventListener('devicemotion', (e) => {
                    if (e.acceleration.x > 15) shakeHandler();
                });
                
                const timer = setInterval(() => setEnergy(e => e < 100 ? e + 0.5 : 100), 1000);
                
                if (navRef.current) {
                    setTimeout(() => {
                        navRef.current.scrollBy({ left: -100, behavior: 'smooth' });
                        setTimeout(() => { navRef.current.scrollBy({ left: 100, behavior: 'smooth' }); }, 800);
                    }, 1500);
                }
                return () => clearInterval(timer);
            }, []);

            // --- Logic ---
            const showToast = (msg, icon='âœ…') => {
                setToast({msg, icon});
                if(navigator.vibrate) navigator.vibrate(50);
                setTimeout(() => setToast(null), 3000);
            };

            const handleTabClick = (tabId) => {
                setActiveTab(tabId);
                setSubView(null); // Reset subview when changing main tabs
                window.scrollTo({top:0, behavior:'smooth'});
            };

            const handlePin = (num) => {
                if (pin.length < 4) {
                    const newPin = pin + num;
                    setPin(newPin);
                    if (newPin === '1234') setTimeout(() => setIsLocked(false), 300);
                    else if (newPin.length === 4) setTimeout(() => { setPin(''); showToast('Ø±Ù…Ø² Ø®Ø§Ø·Ø¦!', 'âŒ'); }, 300);
                }
            };

            const handleTheme = (colorClass) => {
                setTheme(colorClass);
                document.documentElement.className = colorClass;
            };

            // --- RENDER CONTENT LOGIC ---
            // This function renders the specific "Real" content for each subview
            const renderSubViewContent = () => {
                if (!subView) return null;

                const commonBack = (
                    <div style={{display:'flex', alignItems:'center', gap:10, marginBottom:20, cursor:'pointer'}} onClick={() => setSubView(null)}>
                        <div style={{fontSize:24, color:'var(--primary)'}}>âœ</div>
                        <h2 style={{margin:0}}>{subView.title}</h2>
                    </div>
                );

                const btnAction = (msg) => {
                    setBalance(b => b - 10); // Simulation of cost
                    showToast(msg || 'ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­', 'âœ…');
                    setSubView(null);
                };

                return (
                    <div className="slide-in" style={{minHeight:'60vh'}}>
                        {commonBack}
                        
                        {/* Dynamic Form Generation based on ID */}
                        <div className="glass" style={{padding:20, borderRadius:20}}>
                            
                            {/* MARKET VIEWS */}
                            {subView.id.includes('market') && (
                                <div>
                                    {subView.id === 'market_news' ? (
                                        [1,2,3].map(i => <div key={i} style={{borderBottom:'1px solid #333', paddingBottom:10, marginBottom:10}}>
                                            <div style={{fontWeight:'bold'}}>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙˆÙ…ÙŠ {i}</div>
                                            <div style={{fontSize:12, color:'#888'}}>ØªØ­Ø¯ÙŠØ« Ù‡Ø§Ù… Ø¨Ø®ØµÙˆØµ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©...</div>
                                        </div>)
                                    ) : (
                                        <>
                                            <div style={{display:'flex', justifyContent:'space-between', marginBottom:10}}><span>BTC/USDT</span><span style={{color:'var(--primary)'}}>$43,500</span></div>
                                            <div style={{display:'flex', justifyContent:'space-between', marginBottom:10}}><span>ETH/USDT</span><span style={{color:'var(--danger)'}}>$2,240</span></div>
                                            <button className="btn-primary" style={{width:'100%', padding:12, borderRadius:10, marginTop:10}} onClick={()=>btnAction('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª')}>ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</button>
                                        </>
                                    )}
                                </div>
                            )}

                            {/* TRADE VIEWS */}
                            {subView.id.includes('trade') && (
                                <div>
                                    <label>Ø§Ù„Ø²ÙˆØ¬</label>
                                    <select><option>BTC/USDT</option><option>ETH/USDT</option></select>
                                    <label>Ø§Ù„ÙƒÙ…ÙŠØ©</label>
                                    <input type="number" placeholder="0.00" />
                                    {subView.id === 'trade_margin' && <><label>Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</label><input type="range" min="1" max="100" /></>}
                                    <div style={{display:'flex', gap:10}}>
                                        <button className="btn-primary" style={{flex:1, padding:12, borderRadius:10}} onClick={()=>btnAction('ØªÙ… ÙˆØ¶Ø¹ Ø·Ù„Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¡')}>Ø´Ø±Ø§Ø¡ ğŸŸ¢</button>
                                        <button style={{flex:1, padding:12, borderRadius:10, background:'#ff7675', border:'none', color:'#fff', fontWeight:'bold'}} onClick={()=>btnAction('ØªÙ… ÙˆØ¶Ø¹ Ø·Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ¹')}>Ø¨ÙŠØ¹ ğŸ”´</button>
                                    </div>
                                </div>
                            )}

                            {/* INVEST VIEWS */}
                            {subView.id.includes('invest') && (
                                <div>
                                    <label>{subView.id === 'invest_mine' ? 'Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† (TH/s)' : 'Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±'}</label>
                                    <input type="number" placeholder="1000" />
                                    <label>Ø§Ù„Ù…Ø¯Ø© (Ø£ÙŠØ§Ù…)</label>
                                    <div style={{display:'flex', gap:10, marginBottom:15}}>
                                        <button style={{flex:1, padding:10, background:'#0a0e17', border:'1px solid #333', color:'#fff', borderRadius:8}}>30</button>
                                        <button style={{flex:1, padding:10, background:'var(--primary)', border:'none', color:'#000', borderRadius:8}}>60</button>
                                        <button style={{flex:1, padding:10, background:'#0a0e17', border:'1px solid #333', color:'#fff', borderRadius:8}}>90</button>
                                    </div>
                                    <button className="btn-primary" style={{width:'100%', padding:15, borderRadius:12}} onClick={()=>btnAction('ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„Ø®Ø·Ø© Ø¨Ù†Ø¬Ø§Ø­')}>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</button>
                                </div>
                            )}

                            {/* SHOP VIEWS */}
                            {subView.id.includes('shop') && (
                                <div>
                                    <div style={{textAlign:'center', marginBottom:20, fontSize:50}}>ğŸ›ï¸</div>
                                    <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬</label>
                                    <select>
                                        <option>Ø¨Ø·Ø§Ù‚Ø© $50</option>
                                        <option>Ø¨Ø·Ø§Ù‚Ø© $100</option>
                                    </select>
                                    <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…</label>
                                    <input type="email" placeholder="name@example.com" />
                                    <button className="btn-primary" style={{width:'100%', padding:15, borderRadius:12}} onClick={()=>btnAction('ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡! ØªÙÙ‚Ø¯ Ø¨Ø±ÙŠØ¯Ùƒ')}>Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
                                </div>
                            )}

                            {/* WALLET & TOOLS VIEWS */}
                            {(subView.id.includes('wallet') || subView.id.includes('tool')) && (
                                <div>
                                    <label>Ø¨Ø­Ø« / Ø¥Ø¯Ø®Ø§Ù„</label>
                                    <input type="text" placeholder="..." />
                                    <div style={{background:'#0a0e17', padding:15, borderRadius:10, marginBottom:15}}>
                                        Ù†ØªÙŠØ¬Ø©: <span style={{color:'var(--primary)'}}>Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ø¯Ø«Ø©</span>
                                    </div>
                                    <button className="btn-primary" style={{width:'100%', padding:15, borderRadius:12}} onClick={()=>btnAction('ØªÙ… Ø§Ù„Ø­ÙØ¸')}>ØªÙ†ÙÙŠØ°</button>
                                </div>
                            )}

                            {/* COMMUNITY & LEARN */}
                            {(subView.id.includes('comm') || subView.id.includes('learn')) && (
                                <div>
                                    {subView.id === 'comm_chat' ? (
                                        <div style={{height:200, background:'#0a0e17', borderRadius:10, padding:10, marginBottom:10, overflowY:'auto'}}>
                                            <div style={{marginBottom:5}}><b style={{color:'var(--primary)'}}>User1:</b> Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…</div>
                                            <div style={{marginBottom:5}}><b style={{color:'orange'}}>Admin:</b> ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù…</div>
                                        </div>
                                    ) : (
                                        <div style={{marginBottom:15}}>Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠ ØªÙØ§Ø¹Ù„ÙŠ...</div>
                                    )}
                                    <input type="text" placeholder="Ø§ÙƒØªØ¨ Ù…Ø´Ø§Ø±ÙƒØªÙƒ Ù‡Ù†Ø§..." />
                                    <button className="btn-primary" style={{width:'100%', padding:12, borderRadius:10}} onClick={()=>btnAction('ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„')}>Ø¥Ø±Ø³Ø§Ù„</button>
                                </div>
                            )}

                            {/* REWARDS */}
                            {subView.id.includes('rew') && (
                                <div style={{textAlign:'center'}}>
                                    <div style={{fontSize:40, marginBottom:10}}>ğŸ</div>
                                    <h3>Ù…ÙƒØ§ÙØ£ØªÙƒ Ø¬Ø§Ù‡Ø²Ø©</h3>
                                    <p>Ø£ÙƒÙ…Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø²ÙŠØ¯</p>
                                    <button className="btn-primary" style={{width:'100%', padding:15, borderRadius:12}} onClick={()=>btnAction('ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©')}>Ø¬Ù…Ø¹ Ø§Ù„Ø¢Ù†</button>
                                </div>
                            )}

                        </div>
                    </div>
                );
            };

            // --- MAIN RENDER ---
            if (isLocked) {
                return (
                    <div style={{ height: '100vh', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', background: '#0a0e17' }}>
                        <div style={{ fontSize: 60, marginBottom: 20 }}>ğŸ”’</div>
                        <h2 style={{ marginBottom: 40 }}>Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø­Ù…Ø§ÙŠØ©</h2>
                        <div style={{ display: 'flex', gap: 20, marginBottom: 50 }}>
                            {[1,2,3,4].map(i => <div key={i} className={`pin-dot ${pin.length >= i ? 'filled' : ''}`}></div>)}
                        </div>
                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: 20 }}>
                            {[1,2,3,4,5,6,7,8,9].map(n => <div key={n} className="num-pad-btn" onClick={() => handlePin(n)}>{n}</div>)}
                            <div className="num-pad-btn" style={{background:'transparent'}}></div>
                            <div className="num-pad-btn" onClick={() => handlePin(0)}>0</div>
                            <div className="num-pad-btn" onClick={() => setPin(pin.slice(0, -1))}>âŒ«</div>
                        </div>
                        <p style={{ marginTop: 30, color: '#888', fontSize: 12 }}>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: 1234</p>
                    </div>
                );
            }

            return (
                <div className={theme}>
                    {toast && <div style={{ position: 'fixed', top: 20, left: '50%', transform: 'translateX(-50%)', background: '#fff', color: '#000', padding: '10px 20px', borderRadius: 50, zIndex: 9999, fontWeight: 'bold', boxShadow: '0 5px 20px rgba(0,0,0,0.3)', display:'flex', gap:10 }}><span>{toast.icon}</span>{toast.msg}</div>}

                    {/* Header */}
                    <header style={{ padding: '20px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', background: 'linear-gradient(to bottom, rgba(19,25,43,0.9), transparent)' }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: 10 }}>
                            <div onClick={() => setModal('settings')} style={{ width: 40, height: 40, borderRadius: '50%', background: '#2d3446', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '2px solid var(--primary)' }}>ğŸ‘¤</div>
                            <div>
                                <div style={{ fontSize: 12, color: '#888' }}>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒØŒ</div>
                                <div style={{ fontWeight: 'bold' }}>Ahmed Ali</div>
                            </div>
                        </div>
                        <div style={{ display: 'flex', gap: 15 }}>
                            <div onClick={() => setModal('qr')} style={{ fontSize: 24, cursor: 'pointer' }}>ğŸ“·</div>
                            <div onClick={() => setModal('notifications')} style={{ fontSize: 24, cursor: 'pointer', position:'relative' }}>
                                ğŸ”” <span style={{position:'absolute', top:0, right:0, width:8, height:8, background:'red', borderRadius:'50%'}}></span>
                            </div>
                        </div>
                    </header>

                    {/* Content Area */}
                    <div style={{ padding: '0 20px 20px 20px' }}>
                        
                        {/* 1. If SubView is active, show it */}
                        {subView ? (
                            renderSubViewContent()
                        ) : (
                            /* 2. Else, show the standard Tabs */
                            <div className="fade-in">
                                
                                {/* HOME TAB SPECIFIC LAYOUT */}
                                {activeTab === 'home' && (
                                    <>
                                        <div style={{ display: 'flex', gap: 15, overflowX: 'auto', marginBottom: 20, scrollbarWidth: 'none' }}>
                                            <div style={{ textAlign: 'center' }} onClick={() => setSubView({id:'rew_wheel', title:'Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸'})}>
                                                <div className="story-ring" style={{border: '2px dashed var(--primary)', background: 'transparent'}}>
                                                    <div className="story-img" style={{background: 'var(--primary)', color: '#000'}}>ğŸ¡</div>
                                                </div>
                                                <div style={{ fontSize: 11, marginTop: 5 }}>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</div>
                                            </div>
                                            {[{ id: 1, title: 'Ø¹Ø±Ø¶ Ø®Ø§Øµ', icon: 'ğŸ' }, { id: 2, title: 'Ø£Ø®Ø¨Ø§Ø± BTC', icon: 'ğŸ“ˆ' }, { id: 3, title: 'Ø§Ù„ÙØ§Ø¦Ø²ÙˆÙ†', icon: 'ğŸ†' }].map(s => (
                                                <div key={s.id} style={{ textAlign: 'center' }} onClick={() => setModal('story')}>
                                                    <div className="story-ring"><div className="story-img">{s.icon}</div></div>
                                                    <div style={{ fontSize: 11, marginTop: 5 }}>{s.title}</div>
                                                </div>
                                            ))}
                                        </div>

                                        <div style={{ background: 'linear-gradient(135deg, var(--card), #0a0e17)', padding: 25, borderRadius: 25, border: '1px solid rgba(255,255,255,0.1)', position: 'relative', overflow: 'hidden', marginBottom: 20 }}>
                                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 10 }}>
                                                <span style={{color:'#888', fontSize:14}}>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆÙ„</span>
                                                <span onClick={() => setShowBalance(!showBalance)} style={{cursor:'pointer'}}>{showBalance ? 'ğŸ‘ï¸' : 'ğŸ™ˆ'}</span>
                                            </div>
                                            <h1 style={{ margin: '0 0 20px 0', fontSize: 36 }}>{showBalance ? `$${balance.toFixed(2)}` : '****'}</h1>
                                            <div style={{ display: 'flex', gap: 10 }}>
                                                <button className="btn-primary" onClick={() => setModal('deposit')} style={{ flex: 1, padding: 15, borderRadius: 15 }}>Ø¥ÙŠØ¯Ø§Ø¹</button>
                                                <button className="btn-primary" onClick={() => setModal('p2p')} style={{ flex: 1, background: 'rgba(255,255,255,0.1)', color:'#fff', padding: 15, borderRadius: 15 }}>Ø¥Ø±Ø³Ø§Ù„</button>
                                            </div>
                                        </div>

                                        <h3 style={{marginBottom:15}}>Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
                                        {[{n:'Bitcoin',s:'BTC',p:43500,h:0.4,c:2.5},{n:'Ethereum',s:'ETH',p:2240,h:4.2,c:-1.2},{n:'Solana',s:'SOL',p:98,h:150,c:5.4}].map((c, i) => (
                                            <div key={i} onClick={()=>setSubView({id:'market_live', title:c.n})} className="glass" style={{ display: 'flex', justifyContent: 'space-between', padding: 15, borderRadius: 15, marginBottom: 10, alignItems: 'center', cursor:'pointer' }}>
                                                <div style={{ display: 'flex', alignItems: 'center', gap: 12 }}>
                                                    <div style={{ width: 40, height: 40, borderRadius: '50%', background: '#2d3446', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight:'bold' }}>{c.s[0]}</div>
                                                    <div>
                                                        <div style={{ fontWeight: 'bold' }}>{c.n}</div>
                                                        <div style={{ fontSize: 12, color: '#888' }}>{c.h} {c.s}</div>
                                                    </div>
                                                </div>
                                                <div style={{ textAlign: 'left' }}>
                                                    <div style={{ fontWeight: 'bold' }}>${(c.p * c.h).toLocaleString()}</div>
                                                    <div style={{ fontSize: 12, color: c.c > 0 ? '#00d4aa' : '#ff7675' }}>{c.c > 0 ? '+' : ''}{c.c}%</div>
                                                </div>
                                            </div>
                                        ))}
                                    </>
                                )}

                                {/* OTHER TABS GRID */}
                                {features[activeTab] && (
                                    <>
                                        <h2 style={{ fontSize: 24, marginBottom: 20 }}>
                                            {tabs.find(t => t.id === activeTab).icon} {tabs.find(t => t.id === activeTab).label}
                                        </h2>
                                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 15 }}>
                                            {features[activeTab].map((f, i) => (
                                                <div key={i} onClick={() => setSubView({id: f.id, title: f.t})} className="glass" style={{ padding: 20, borderRadius: 20, textAlign: 'center', cursor: 'pointer', transition: '0.2s', border: '1px solid rgba(255,255,255,0.05)' }}>
                                                    <div style={{ fontSize: 32, marginBottom: 10 }}>{f.i}</div>
                                                    <div style={{ fontWeight: 'bold' }}>{f.t}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </>
                                )}
                            </div>
                        )}

                    </div>

                    {/* --- MODALS (Overlays) --- */}
                    {(modal === 'deposit' || modal === 'p2p') && (
                        <div className="modal-overlay" onClick={() => setModal(null)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()}>
                                <h3>{modal === 'deposit' ? 'ğŸ“¥ Ø¥ÙŠØ¯Ø§Ø¹' : 'ğŸ’¸ Ø¥Ø±Ø³Ø§Ù„ P2P'}</h3>
                                <input type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº (USD)" style={{fontSize:18}} />
                                {modal === 'p2p' && <input type="email" placeholder="Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…" />}
                                <button className="btn-primary" onClick={() => {setModal(null); showToast('ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­'); setBalance(b=>b+100);}} style={{width:'100%', padding:15, borderRadius:12}}>ØªØ£ÙƒÙŠØ¯</button>
                            </div>
                        </div>
                    )}

                    {modal === 'story' && (
                        <div className="modal-overlay modal-center" onClick={() => setModal(null)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()} style={{background: 'linear-gradient(135deg, #FF6B6B, #556270)', height: 400, display:'flex', alignItems:'center', justifyContent:'center', flexDirection:'column'}}>
                                <h1>ğŸ”¥</h1>
                                <h2>Ø®Ø¨Ø± Ø¹Ø§Ø¬Ù„!</h2>
                                <p>Ø§Ù„Ø³ÙˆÙ‚ ÙŠØ´Ù‡Ø¯ Ø§Ø±ØªÙØ§Ø¹Ø§Ù‹ ÙƒØ¨ÙŠØ±Ø§Ù‹ Ø§Ù„ÙŠÙˆÙ….</p>
                                <button onClick={() => setModal(null)} style={{background:'rgba(0,0,0,0.5)', border:'none', color:'white', padding:'10px 20px', borderRadius:20}}>Ø¥ØºÙ„Ø§Ù‚</button>
                            </div>
                        </div>
                    )}

                    {modal === 'settings' && (
                         <div className="modal-overlay" onClick={() => setModal(null)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()}>
                                <h3>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
                                <div style={{display:'flex', gap:10, marginBottom:20}}>
                                    {['', 'theme-blue', 'theme-purple', 'theme-gold'].map(t => <div key={t} onClick={() => handleTheme(t)} style={{width:30, height:30, borderRadius:'50%', background: t===''?'#00d4aa':t==='theme-blue'?'#2980b9':t==='theme-purple'?'#9b59b6':'#f1c40f', border:'2px solid white'}}></div>)}
                                </div>
                                <div className="glass" style={{borderRadius:15}}>
                                    <div style={{padding:15}} onClick={() => window.location.reload()}>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
                                </div>
                            </div>
                        </div>
                    )}
                     
                    {modal === 'qr' && (
                        <div style={{position:'fixed', inset:0, background:'#000', zIndex:6000, display:'flex', flexDirection:'column', alignItems:'center', justifyContent:'center'}}>
                            <div style={{width:250, height:250, border:'2px solid var(--primary)', position:'relative', borderRadius:20}}>
                                <div style={{position:'absolute', top:0, left:0, width:'100%', height:2, background:'var(--primary)', animation:'slideIn 2s infinite alternate'}}></div>
                            </div>
                            <button onClick={() => setModal(null)} style={{marginTop:30, padding:'10px 30px', background:'#333', color:'#fff', border:'none', borderRadius:20}}>Ø¥Ù„ØºØ§Ø¡</button>
                        </div>
                    )}

                    {modal === 'notifications' && (
                        <div className="modal-overlay" onClick={() => setModal(null)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()}>
                                <h3>ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
                                <div style={{padding:15, borderBottom:'1px solid #333'}}>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¥ÙŠØ¯Ø§Ø¹Ùƒ $200</div>
                            </div>
                        </div>
                    )}

                    {/* Navigation */}
                    <nav 
                        ref={navRef}
                        className="glass scroll-hide" 
                        style={{ 
                            position: 'fixed', bottom: 0, left: 0, width: '100%', 
                            display: 'flex', overflowX: 'auto', padding: '10px 0', 
                            zIndex: 100, backdropFilter: 'blur(20px)', background: 'rgba(10, 14, 23, 0.95)',
                            whiteSpace: 'nowrap', justifyContent: 'flex-start' 
                        }}
                    >
                        {tabs.map(t => (
                            <div 
                                key={t.id} 
                                onClick={() => handleTabClick(t.id)} 
                                style={{ 
                                    minWidth: '80px', 
                                    display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 5, 
                                    color: activeTab === t.id ? 'var(--primary)' : '#576071', 
                                    cursor: 'pointer', transition: '0.2s',
                                    opacity: activeTab === t.id ? 1 : 0.6
                                }}
                            >
                                <span style={{ fontSize: 24, transform: activeTab === t.id ? 'scale(1.1)' : 'scale(1)' }}>{t.icon}</span>
                                <span style={{ fontSize: 10, fontWeight: 'bold' }}>{t.label}</span>
                                {activeTab === t.id && <div style={{width: 4, height: 4, background: 'var(--primary)', borderRadius: '50%'}}></div>}
                            </div>
                        ))}
                        <div style={{minWidth: 20}}></div> 
                    </nav>

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CryptoVaultV6 />);
    </script>
</body>
</html>
